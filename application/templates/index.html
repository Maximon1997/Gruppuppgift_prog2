<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <title>Personal Finance Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>Personal Finance Dashboard</h1>
        <p>Sök efter aktiedata och se resultat i olika valutor.</p>

        <!-- Formulär för att hämta data -->
        <form action="/results" method="POST">
            <!-- Fält för aktiesymbol -->
            <label for="stock">Aktiesymbol (t.ex. AAPL, TSLA):</label><br>
            <input type="text" id="stock" name="stock" value="{{ form_data.get('stock', '') }}" required><br><br>

            <!-- Dropdown för basvaluta -->
            <label for="currency">Basvaluta:</label><br>
            <select id="currency" name="currency" required>
                {% set saved_currency = form_data.get('currency', '') %}
                <option value="USD" {% if saved_currency == 'USD' %}selected{% endif %}>USD</option>
                <option value="EUR" {% if saved_currency == 'EUR' %}selected{% endif %}>EUR</option>
                <option value="SEK" {% if saved_currency == 'SEK' %}selected{% endif %}>SEK</option>
                <option value="GBP" {% if saved_currency == 'GBP' %}selected{% endif %}>GBP</option>
            </select><br><br>

            <!-- Skicka-knapp -->
            <button type="submit">Visa resultat</button>
        </form>

        <div class="stock-section">
            <h2 class="gainers-title">Top Gainers</h2>
            {{ gainers_table|safe }}
        </div>

        <div class="stock-section">
            <h2 class="losers-title">Top Losers</h2>
            {{ losers_table|safe }}
        </div>

    </div>


    <script>
    // Markerar automatiskt positiva och negativa värden
    document.addEventListener("DOMContentLoaded", function() {
        document.querySelectorAll("td").forEach(td => {
            const text = td.textContent.trim();
            if (text.endsWith("%")) {
                const value = parseFloat(text.replace("%", ""));
                if (!isNaN(value)) {
                    if (value > 0) td.classList.add("positive");
                    else if (value < 0) td.classList.add("negative");
                }
            }
        });
    });
    </script>

</body>
</html>
